<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°—á–µ—Ç—á–∏–∫ –ö–ª–∏–∫–æ–≤ - –ò–≥—Ä–∞</title>
    <link rel="stylesheet" href="game-style.css">
</head>
<body>
    <canvas id="main-dark-veil-canvas"></canvas>
    
    <!-- User Info Panel -->
    <div class="user-panel">
        <div class="user-info">
            <h3 id="username">Player</h3>
            <p>ELO: <span id="user-elo">1000</span></p>
            <p>–ò–≥—Ä—ã: <span id="user-games">0</span></p>
        </div>
        <button id="logout-btn" class="small-btn">–í—ã—Ö–æ–¥</button>
    </div>
    
    <!-- Main Menu -->
    <div id="main-menu" class="menu-container">
        <h1 class="title">–°—á–µ—Ç—á–∏–∫ –ö–ª–∏–∫–æ–≤</h1>
        
        <div class="menu-buttons">
            <button id="practice-btn" class="menu-btn">–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</button>
            <button id="ranked-btn" class="menu-btn">–†–µ–π—Ç–∏–Ω–≥–æ–≤–∞—è –∏–≥—Ä–∞</button>
            <button id="leaderboard-btn" class="menu-btn">–¢–∞–±–ª–∏—Ü–∞ –ª–∏–¥–µ—Ä–æ–≤</button>
        </div>
    </div>
    
    <!-- Practice Mode (original clicker) -->
    <div id="practice-screen" class="screen" style="display: none;">
        <button class="back-btn" onclick="showMainMenu()">‚Üê –ù–∞–∑–∞–¥</button>
        
        <div class="counter-app">
            <h1 class="counter-app__title">–°—á–µ—Ç—á–∏–∫ –ö–ª–∏–∫–æ–≤</h1>
            
            <div class="mode-switch">
                <button id="free-mode-btn" class="mode-btn active">–°–≤–æ–±–æ–¥–Ω—ã–π —Ä–µ–∂–∏–º</button>
                <button id="test-mode-btn" class="mode-btn">–¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º</button>
            </div>
            
            <div class="cps-display">
                <span class="cps-label">CPS:</span>
                <span class="cps-value" id="cps-value">0.00</span>
            </div>
            
            <div class="test-status" id="test-status"></div>
            
            <div class="counter-app__value" id="counter">0</div>
            
            <div id="free-mode-buttons">
                <button class="counter-app__button" id="increment-free">–ö–ª–∏–∫–∞–π!</button>
                <button class="counter-app__button counter-app__button--secondary" id="reset-free">–°–±—Ä–æ—Å</button>
            </div>
            
            <div id="test-mode-buttons" style="display: none;">
                <button class="counter-app__button" id="start-test">–ù–∞—á–∞—Ç—å —Ç–µ—Å—Ç</button>
                <button class="counter-app__button" id="increment-test" disabled>–ö–ª–∏–∫–∞–π!</button>
            </div>
        </div>
        
        <svg id="lightning-svg"></svg>
    </div>
    
    <!-- Player Selection Screen -->
    <div id="player-selection-screen" class="screen" style="display: none;">
        <button class="back-btn" onclick="showMainMenu()">‚Üê –ù–∞–∑–∞–¥</button>
        
        <div class="player-selection-container">
            <h2>–í—ã–±–µ—Ä–∏—Ç–µ —Å–æ–ø–µ—Ä–Ω–∏–∫–∞</h2>
            <div class="filter-controls">
                <button id="filter-all" class="filter-btn active">–í—Å–µ –∏–≥—Ä–æ–∫–∏</button>
                <button id="filter-similar" class="filter-btn">–ü–æ—Ö–æ–∂–∏–π ELO (¬±200)</button>
                <button id="filter-online" class="filter-btn">–û–Ω–ª–∞–π–Ω</button>
            </div>
            <div class="players-list" id="players-list">
                <div class="loading-spinner">
                    <div class="spinner"></div>
                    <p>–ó–∞–≥—Ä—É–∑–∫–∞ –∏–≥—Ä–æ–∫–æ–≤...</p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Matchmaking Screen (waiting for opponent to accept) -->
    <div id="matchmaking-screen" class="screen" style="display: none;">
        <button class="back-btn" onclick="cancelMatchmaking()">‚Üê –û—Ç–º–µ–Ω–∞</button>
        
        <div class="matchmaking-box">
            <h2>–û–∂–∏–¥–∞–Ω–∏–µ –ø—Ä–∏–Ω—è—Ç–∏—è –≤—ã–∑–æ–≤–∞...</h2>
            <div class="spinner"></div>
            <p id="matchmaking-status">–ò–≥—Ä–æ–∫ <span id="challenged-player-name"></span> –ø–æ–ª—É—á–∏–ª –≤–∞—à –≤—ã–∑–æ–≤</p>
        </div>
    </div>
    
    <!-- Challenge Received Screen -->
    <div id="challenge-screen" class="screen" style="display: none;">
        <div class="challenge-box">
            <h2>üéÆ –í—ã–∑–æ–≤ –Ω–∞ –¥—É—ç–ª—å!</h2>
            <p class="challenge-text">
                <span id="challenger-name">Player</span> 
                <span class="challenge-elo">(ELO: <span id="challenger-elo">1000</span>)</span>
                <br>–±—Ä–æ—Å–∞–µ—Ç –≤–∞–º –≤—ã–∑–æ–≤!
            </p>
            <div class="challenge-buttons">
                <button class="accept-btn" onclick="acceptChallenge()">‚úì –ü—Ä–∏–Ω—è—Ç—å</button>
                <button class="decline-btn" onclick="declineChallenge()">‚úó –û—Ç–∫–ª–æ–Ω–∏—Ç—å</button>
            </div>
        </div>
    </div>
    
    <!-- Battle Screen -->
    <div id="battle-screen" class="screen" style="display: none;">
        <div class="battle-container">
            <div class="battle-header">
                <div class="player-info">
                    <h3 id="battle-player1-name">Player 1</h3>
                    <p>ELO: <span id="battle-player1-elo">1000</span></p>
                </div>
                <div class="timer-container">
                    <div id="battle-timer">10</div>
                    <div id="battle-status">–ü—Ä–∏–≥–æ—Ç–æ–≤—å—Ç–µ—Å—å...</div>
                </div>
                <div class="player-info">
                    <h3 id="battle-player2-name">Player 2</h3>
                    <p>ELO: <span id="battle-player2-elo">1000</span></p>
                </div>
            </div>
            
            <div class="battle-scores">
                <div class="score-box">
                    <div class="score-value" id="battle-score1">0</div>
                    <div class="score-label">–í–∞—à–∏ –∫–ª–∏–∫–∏</div>
                </div>
                <div class="vs">VS</div>
                <div class="score-box">
                    <div class="score-value" id="battle-score2">0</div>
                    <div class="score-label">–ö–ª–∏–∫–∏ —Å–æ–ø–µ—Ä–Ω–∏–∫–∞</div>
                </div>
            </div>
            
            <button class="battle-click-btn" id="battle-click-btn" disabled>–ö–õ–ò–ö–ê–ô!</button>
        </div>
        
        <svg id="battle-lightning-svg"></svg>
    </div>
    
    <!-- Results Screen -->
    <div id="results-screen" class="screen" style="display: none;">
        <div class="results-box">
            <h1 id="result-title">–ü–æ–±–µ–¥–∞!</h1>
            <div class="result-stats">
                <p>–í–∞—à–∏ –∫–ª–∏–∫–∏: <span id="result-your-clicks">0</span></p>
                <p>–ö–ª–∏–∫–∏ —Å–æ–ø–µ—Ä–Ω–∏–∫–∞: <span id="result-opponent-clicks">0</span></p>
                <p class="elo-change" id="elo-change">+25 ELO</p>
            </div>
            <button class="menu-btn" onclick="showMainMenu()">–í –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é</button>
        </div>
    </div>
    
    <!-- Leaderboard Screen -->
    <div id="leaderboard-screen" class="screen" style="display: none;">
        <button class="back-btn" onclick="showMainMenu()">‚Üê –ù–∞–∑–∞–¥</button>
        
        <div class="leaderboard-container">
            <h2>–¢–∞–±–ª–∏—Ü–∞ –ª–∏–¥–µ—Ä–æ–≤</h2>
            <table class="leaderboard-table">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>–ò–≥—Ä–æ–∫</th>
                        <th>ELO</th>
                        <th>–ò–≥—Ä—ã</th>
                        <th>–ü–æ–±–µ–¥—ã</th>
                        <th>–ü–æ—Ä–∞–∂–µ–Ω–∏—è</th>
                    </tr>
                </thead>
                <tbody id="leaderboard-body">
                </tbody>
            </table>
        </div>
    </div>
    
    <script src="game.js"></script>
</body>
</html>
